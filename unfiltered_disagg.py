import progressbar
from lxml import etree
import pdb

#Two dimension exchange rate dictionary. Access exchange rates by currency and year like ratedf[currencyCode][year]
ratedf = {																																												
"AFN":{2002:0.0244299492045022,2003:0.0206942317044902,2004:0.0209008569919987,2005:0.0202245790782026,2006:0.0200250421465689,2007:0.0200142691727389,2008:0.0198972385021323,2009:0.0198706579252899,2010:0.0215311643407389,2011:0.0213938403916663,2012:0.0196334913906952,2013:0.0180600934612075,2014:0.0174263063178813,2015:0.0163515897175301,2016:0.0147351661777415,2017:0.0146647908512209,2018:0.0143394739961986,2019:0.0138784955306786,2020:0.0134418758847148,2021:0.0130198042374685,2022:0.0126375537465191}
,"AOA":{1994:4438,1995:369.266666666667,1996:7.82634730538922,1997:4.38070776255708,1998:2.5453834115806,1999:0.35833673053404,2000:0.0996007243689045,2001:0.0453348620827858,2002:0.0229719197370646,2003:0.013403741787386,2004:0.0119702052139657,2005:0.0114733879898002,2006:0.0124426052860453,2007:0.013036789804005,2008:0.0133273930189273,2009:0.0126057934351088,2010:0.0108807294156234,2011:0.0106457010962467,2012:0.0104747540464325,2013:0.0103607242686396,2014:0.0101727017057853,2015:0.00835631423903383,2016:0.00611290056378339,2017:0.00602824918616643,2018:0.00560573558095871,2019:0.00491622363261058,2020:0.00442097544088312,2021:0.00406278089178066,2022:0.00373892349783746}
,"AUD":{1980:1.139517172,1981:1.149313491,1982:1.017393998,1983:0.902378871,1984:0.879572797,1985:0.700799351,1986:0.670875651,1987:0.700857565,1988:0.784216442,1989:0.792528112,1990:0.781289797,1991:0.7790979,1992:0.735299284,1993:0.680116413,1994:0.731674124,1995:0.741496187,1996:0.782945437,1997:0.744062837,1998:0.62940068,1999:0.645332247,2000:0.582346532,2001:0.517635943,2002:0.543902648,2003:0.651884045,2004:0.736578578,2005:0.763843802,2006:0.75334984,2007:0.838560795,2008:0.855264574,2009:0.791303713,2010:0.919499092,2011:1.032212708,2012:1.035799755,2013:0.96842634,2014:0.90269528,2015:0.7526124,2016:0.743888756,2017:0.771955602,2018:0.789655036,2019:0.791796204,2020:0.788861628,2021:0.783152088,2022:0.777451106}
,"BAM":{1996:0.649157761275131,1997:0.579934127185204,1998:0.57283870267925,1999:0.545454545454546,2000:0.471077184054283,2001:0.457558737441658,2002:0.48121325111143,2003:0.577059223961879,2004:0.634891861482685,2005:0.635829747645075,2006:0.641408421702872,2007:0.699808184143223,2008:0.748959333973743,2009:0.710290556900727,2010:0.67718772192851,2011:0.710759252193819,2012:0.656931241171305,2013:0.678869236809633,2014:0.678362144740697,2015:0.567051151702135,2016:0.565866320571058,2017:0.567227709903821,2018:0.580217581593097,2019:0.582467279642996,2020:0.583032697703716,2021:0.580756484347183,2022:0.57807239606441}
,"BDT":{1980:0.0647077828320806,1981:0.0555978463617023,1982:0.0452124742284196,1983:0.040624190251346,1984:0.0394413567144878,1985:0.0357218612423,1986:0.0328871340523883,1987:0.0323098258747169,1988:0.0315123779690709,1989:0.0309885460887041,1990:0.0289278630678594,1991:0.0273248978912893,1992:0.0256735650823749,1993:0.0252732637768835,1994:0.024868363153058,1995:0.0248270336287607,1996:0.0239268841154559,1997:0.022783280493683,1998:0.0213192321824829,1999:0.0203724892899517,2000:0.0191784797402582,2001:0.0179188479576506,2002:0.0172746959052662,2003:0.0171969026855672,2004:0.0168032498743915,2005:0.0155453611494637,2006:0.0146821651320184,2007:0.0145278392834444,2008:0.014554705807112,2009:0.014494240889822,2010:0.0142455127551145,2011:0.0133005396967519,2012:0.0125729373213721,2013:0.0126875758869591,2014:0.0128671100158679,2015:0.0127249153960426,2016:0.0123823795120056,2017:0.0119700336231251,2018:0.0115628148953573,2019:0.011173640609478,2020:0.010790217204735,2021:0.0104199550367435,2022:0.010069843612028}
,"BIF":{1980:0.0111168260351156,1981:0.0111096133540024,1982:0.0111138290065619,1983:0.0107567667454459,1984:0.00834960328999294,1985:0.00828342041544539,1986:0.00876071108837447,1987:0.00809126895628903,1988:0.00712051204858702,1989:0.00630364507858656,1990:0.00584007187780773,1991:0.00550864058834359,1992:0.00479952448334139,1993:0.0041187680580316,1994:0.00395625850980929,1995:0.0040050142778759,1996:0.00330172351489009,1997:0.00283760823490258,1998:0.002233164366399,1999:0.00177502664589653,2000:0.00138698024111137,2001:0.00120473155915891,2002:0.00107401597354666,2003:0.000924201360518589,2004:0.000908195797088215,2005:0.000924482141024495,2006:0.000971829910680204,2007:0.000924189851495777,2008:0.000843476063227217,2009:0.000812663076298304,2010:0.000812459741860109,2011:0.000793038849682252,2012:0.000693146671974948,2013:0.000644182085133603,2014:0.000646508841239772,2015:0.000636186858983519,2016:0.000604354239406323,2017:0.000577799030155898,2018:0.000550082079290052,2019:0.000523080164680542,2020:0.000497658021912162,2021:0.000473384908460871,2022:0.000450343777410576}
,"BRL":{1990:38750.3333333333,1991:6795.45,1992:609.338533541342,1993:31.0915797687451,1994:1.56494516551243,1995:1.09083961524858,1996:0.995363627110673,1997:0.927995176921485,1998:0.861990460427535,1999:0.551100430169411,2000:0.54662482392942,2001:0.425597147191424,2002:0.342424844907401,2003:0.324940583287882,2004:0.341866939088239,2005:0.410780232416714,2006:0.459701591649546,2007:0.513595192817753,2008:0.545325539913622,2009:0.500805421118685,2010:0.568397057321094,2011:0.597303206164361,2012:0.511770680158513,2013:0.463596142184953,2014:0.424999896174947,2015:0.300218379181185,2016:0.287003691620811,2017:0.315088216905733,2018:0.31351733243865,2019:0.307201267911847,2020:0.300931675813422,2021:0.295139295417141,2022:0.289492191895231}
,"BWP":{1980:1.33674630261661,1981:1.13071895424837,1982:0.933503836317136,1983:0.864903502501787,1984:0.658804168952276,1985:0.462174452252997,1986:0.53854351687389,1987:0.627906976744186,1988:0.523866145744862,1989:0.526605504587156,1990:0.539279636982416,1991:0.477480868147033,1992:0.449474165523548,1993:0.392956349206349,1994:0.372660486269022,1995:0.360835748055513,1996:0.302885510394043,1997:0.27411610650371,1998:0.238045840742936,1999:0.21627696068767,2000:0.196539229961735,2001:0.172020208320339,2002:0.158530915853092,2003:0.202737957558968,2004:0.213359659347718,2005:0.197568568726356,2006:0.171976246468269,2007:0.162941342903519,2008:0.147589031196049,2009:0.140439955351066,2010:0.147285576614199,2011:0.146634408499326,2012:0.131380925144777,2013:0.119168858749427,2014:0.111463789179258,2015:0.0989220342235289,2016:0.0917448493706096,2017:0.0927512602525496,2018:0.0912339841128642,2019:0.0890298492874875,2020:0.0869713161113513,2021:0.0848752407539657,2022:0.0830112134382039}
,"CAD":{1980:0.855250392,1981:0.834120086,1982:0.810615012,1983:0.811430314,1984:0.772142108,1985:0.732361592,1986:0.719696825,1987:0.754177988,1988:0.81258358,1989:0.844626367,1990:0.857091733,1991:0.872819995,1992:0.827353743,1993:0.775172977,1994:0.732277231,1995:0.728653406,1996:0.733433058,1997:0.7222398,1998:0.674122875,1999:0.673006085,2000:0.673378508,2001:0.645700808,2002:0.637252281,2003:0.713818518,2004:0.768619974,2005:0.825295619,2006:0.881590155,2007:0.931012525,2008:0.937171907,2009:0.874813461,2010:0.9707201,2011:1.010580133,2012:1.000812483,2013:0.971065558,2014:0.904073234,2015:0.781801164,2016:0.754489175,2017:0.769638055,2018:0.790646334,2019:0.792156315,2020:0.791417789,2021:0.789644816,2022:0.788117677}
,"COP":{1980:0.0211511135484402,1981:0.0183521485253361,1982:0.0156041754455579,1983:0.0126811005574878,1984:0.00991886049636695,1985:0.00702686849547064,1986:0.00514771168523401,1987:0.00412187974803364,1988:0.00334253460945838,1989:0.00261392649289826,1990:0.00199099288540864,1991:0.00159451997928776,1992:0.00146975233212973,1993:0.00127170499722736,1994:0.00120986012608353,1995:0.00109541300665695,1996:0.000964670525194646,1997:0.00087633225841714,1998:0.000701051796696044,1999:0.000569255246193938,2000:0.000478945576437076,2001:0.000434804362167978,2002:0.000399253229415913,2003:0.000347518772145624,2004:0.000380462825170099,2005:0.000430822916544174,2006:0.000423982411994853,2007:0.000481276909657783,2008:0.000508870267264058,2009:0.000463478431458029,2010:0.00052659453428368,2011:0.00054111993340797,2012:0.000556169456822835,2013:0.000535076150919708,2014:0.000499723273430947,2015:0.000364726164501471,2016:0.000327304025270235,2017:0.000333774497153835,2018:0.000329712704661139,2019:0.000326857119605426,2020:0.000323738743638784,2021:0.000320456380359074,2022:0.00031720847475089}
,"DKK":{1980:0.177465344,1981:0.14041667,1982:0.120033613,1983:0.109358687,1984:0.096572781,1985:0.094407143,1986:0.123628174,1987:0.146217333,1988:0.148574778,1989:0.136827733,1990:0.161599987,1991:0.156380713,1992:0.165718867,1993:0.154243666,1994:0.157236529,1995:0.178528736,1996:0.172463107,1997:0.151429726,1998:0.149246998,1999:0.143341111,2000:0.12373701,2001:0.120172713,2002:0.126676272,2003:0.151827979,2004:0.166912129,2005:0.166766605,2006:0.168163661,2007:0.183698844,2008:0.196150366,2009:0.186536774,2010:0.177806824,2011:0.186264318,2012:0.172637813,2013:0.178052596,2014:0.178174793,2015:0.148634723,2016:0.148550402,2017:0.151266732,2018:0.157920672,2019:0.157969075,2020:0.157569639,2021:0.156965205,2022:0.15641118}
,"ETB":{1980:0.483090207365736,1981:0.483105954354201,1982:0.483065737655256,1983:0.483076252248324,1984:0.48309875403784,1985:0.483105112796769,1986:0.483095452605624,1987:0.483076786585636,1988:0.483090753424658,1989:0.483092573753815,1990:0.483103831843811,1991:0.483091117200236,1992:0.48310322156476,1993:0.234303726103224,1994:0.196274760537554,1995:0.170062126835566,1996:0.157973867907643,1997:0.153937865017106,1998:0.145144191896505,1999:0.132558528428094,2000:0.12267608151591,2001:0.119949237097762,2002:0.117062042435177,2003:0.116539625905503,2004:0.116019950581129,2005:0.115585613280049,2006:0.115196466393807,2007:0.113683445183702,2008:0.107298916976169,2009:0.0961585739716654,2010:0.0775166281031137,2011:0.0620448513723137,2012:0.0577177831361414,2013:0.0549715602690441,2014:0.0523290834963354,2015:0.0498343170557513,2016:0.0474613296475756,2017:0.0447639359926523,2018:0.0418358051390621,2019:0.039098964999566,2020:0.036540892469539,2021:0.0341503796112957,2022:0.0319163297917962}
,"EUR":{1980:1.077882204,1981:0.868843086,1982:0.806973023,1983:0.767762198,1984:0.689588619,1985:0.669879209,1986:0.90468713,1987:1.089930533,1988:1.115987461,1989:1.041742364,1990:1.213538639,1991:1.183126978,1992:1.255549395,1993:1.183704212,1994:1.208017309,1995:1.366263798,1996:1.300236202,1997:1.129454168,1998:1.113076805,1999:1.066815021,2000:0.924021489,2001:0.895623552,2002:0.944419248,2003:1.130827718,2004:1.243304031,2005:1.245755065,2006:1.255648595,2007:1.370635795,2008:1.471714538,2009:1.392797568,2010:1.326893948,2011:1.391407707,2012:1.285573514,2013:1.328155783,2014:1.328841557,2015:1.109624957,2016:1.106608355,2017:1.127788302,2018:1.176396602,2019:1.181763704,2020:1.183642918,2021:1.17951761,2022:1.174472193}
,"GHC":{1980:3570.71428571429,1981:3530.08333333333,1982:3601.71428571429,1983:1284.76666666667,1984:280.558139534884,1985:184.054545454545,1986:112.09756097561,1987:65.3666666666667,1988:49.2130177514793,1989:37.1101321585903,1990:30.6104294478528,1991:27.2106537530266,1992:22.9107883817427,1993:15.4174603174603,1994:10.4746162927981,1995:8.33359746434231,1996:6.12026002166847,1997:4.87162750217581,1998:4.31818181818182,1999:3.75402985074627,2000:1.8341628959276,2001:1.39512746047112,2002:1.26125220015087,2003:1.15301764159703,2004:1.11118800461361,2005:1.10282321733089,2006:1.09067094359797,2007:1.06927528720739,2008:0.945293084595248,2009:0.699218536532051,2010:0.698796750792754,2011:0.661445098301458,2012:0.556847905463719,2013:0.511753875139162,2014:0.342094350775963,2015:0.26937651963755,2016:0.255673430355916,2017:0.224636714445943,2018:0.203793019221773,2019:0.189250630083629,2020:0.178831815991682,2021:0.171248962432257,2022:0.164797959478027}
,"GTQ":{1980:1,1981:1,1982:1,1983:1,1984:1,1985:1,1986:0.381687172863843,1987:0.395234332259437,1988:0.369019546192947,1989:0.369,1990:0.222933333333333,1991:0.198846338727768,1992:0.193401249824181,1993:0.177457382749555,1994:0.173875419838371,1995:0.172099997414751,1996:0.164174451231482,1997:0.164917095951579,1998:0.156390009210985,1999:0.135406745705934,2000:0.128812009563282,2001:0.127250336785097,2002:0.127852954026596,2003:0.125933671945025,2004:0.12584015963033,2005:0.130992783867443,2006:0.131532919124941,2007:0.130321668704156,2008:0.132276795370971,2009:0.122526114811002,2010:0.124103478608076,2011:0.128445980183929,2012:0.127654076402946,2013:0.127277841067554,2014:0.129328514512623,2015:0.130635816834929,2016:0.129153798168368,2017:0.126690177512252,2018:0.125040858917302,2019:0.123691893664065,2020:0.122193764624044,2021:0.120476535527045,2022:0.117650378130386}
,"HNL":{1980:0.499928744477697,1981:0.5,1982:0.5,1983:0.5,1984:0.5,1985:0.5,1986:0.5,1987:0.500044033465434,1988:0.499960471183493,1989:0.500035388208649,1990:0.243218015284989,1991:0.188065991213126,1992:0.181871231277961,1993:0.154535490941912,1994:0.118924534995692,1995:0.105592605592606,1996:0.0844913030803615,1997:0.0760309107538141,1998:0.0738515081206496,1999:0.0697136276725187,2000:0.0666079096892756,2001:0.0638933927847588,2002:0.0601933930493083,2003:0.0569956167990029,2004:0.0543130990415335,2005:0.0526375940831687,2006:0.0525575893895912,2007:0.0525545132660008,2008:0.0525499491267715,2009:0.0525555813548499,2010:0.0525584223785944,2011:0.052679179053691,2012:0.0510974155179618,2013:0.048961727736038,2014:0.0474828402880613,2015:0.0453160251141153,2016:0.0434872867816314,2017:0.0419166879254059,2018:0.0404949729311678,2019:0.0385659405303772,2020:0.0367294087457434,2021:0.0351522636330973,2022:0.0338828186495974}
,"HTG":{1980:0.200077649799405,1981:0.200094051257936,1982:0.200067819599864,1983:0.200084245998315,1984:0.200057023379586,1985:0.200017117425539,1986:0.200046217840086,1987:0.199968730456535,1988:0.199952448882549,1989:0.200102880658436,1990:0.200040412204486,1991:0.166447985004686,1992:0.102342549923195,1993:0.0774406499936524,1994:0.0678413086683993,1995:0.0690662672788431,1996:0.0623405578065042,1997:0.0618264637262526,1998:0.0591139260599711,1999:0.0599820948970456,2000:0.0509667440061872,2001:0.0419603267211202,2002:0.0369251712255924,2003:0.0247165116317908,2004:0.0252017636960687,2005:0.0256494182759544,2006:0.0241252320709351,2007:0.0267366316841579,2008:0.0261383135799513,2009:0.0245781693295505,2010:0.0247984656417633,2011:0.0248172386694579,2012:0.0240504052599974,2013:0.0231841038963889,2014:0.0224035134755576,2015:0.0204700172786585,2016:0.016995938895553,2017:0.0152583145037945,2018:0.0151075348661383,2019:0.0148117170481428,2020:0.0145208369103976,2021:0.0141656627430262,2022:0.0137531949748843}
,"IDR":{1980:0.00159491884965322,1981:0.00158288250117597,1982:0.00151190285208099,1983:0.00109978793025688,1984:0.00097471086311066,1985:0.000900428254719044,1986:0.00077969316046874,1987:0.000608326587566023,1988:0.00059322572814326,1989:0.000564941912125268,1990:0.000542654279557738,1991:0.000512740893639058,1992:0.000492635064796675,1993:0.000479133632790285,1994:0.000462792462177938,1995:0.000444719566298864,1996:0.000426931683968422,1997:0.000343715244287949,1998:9.98642532682783e-05,1999:0.000127305089622232,2000:0.000118739847386462,2001:9.74577830656665e-05,2002:0.000107397886289365,2003:0.000116626616618603,2004:0.000111956232480307,2005:0.00010300776782931,2006:0.000109116456905411,2007:0.000109409260644599,2008:0.000103157582495622,2009:9.60743590276767e-05,2010:0.000110029334949813,2011:0.000113971045463031,2012:0.000106665914551735,2013:9.60227459618731e-05,2014:8.43023504165249e-05,2015:7.46760441196748e-05,2016:7.51561452969159e-05,2017:7.48571920387489e-05,2018:7.39121283539367e-05,2019:7.29550916155519e-05,2020:7.29157764911469e-05,2021:7.40797421971556e-05,2022:7.47782515744618e-05}
,"ILS":{1980:195.360655737705,1981:87.3840830449827,1982:41.1948249619482,1983:17.7872716558633,1984:3.41043083900227,1985:0.848286435210323,1986:0.672107221411392,1987:0.627099592125124,1988:0.625421778645396,1989:0.521806424255274,1990:0.495986473561962,1991:0.438769870074519,1992:0.406656834965506,1993:0.35334622639257,1994:0.332111852038249,1995:0.332084563349704,1996:0.313318136486679,1997:0.289910848756229,1998:0.263152520914023,1999:0.241561557599906,2000:0.245258891489634,2001:0.237775849491824,2002:0.21106795304061,2003:0.219580204134264,2004:0.223116140775699,2005:0.222830668837679,2006:0.224426641945292,2007:0.243422271380002,2008:0.278704760625797,2009:0.254301249946361,2010:0.267452883111649,2011:0.27947601518586,2012:0.259341202084446,2013:0.276949851295167,2014:0.2794917919138,2015:0.257278521844598,2016:0.260378536642927,2017:0.275706406260646,2018:0.275944299709564,2019:0.273165060228645,2020:0.270997106728041,2021:0.268401843249559,2022:0.265912591081189}
,"INR":{1980:0.126594222607438,1981:0.111791155566805,1982:0.103505477165045,1983:0.0969555683442683,1984:0.0840011082927498,1985:0.0820719809314533,1986:0.0780218250336241,1987:0.0770618561600736,1988:0.0685854902130432,1989:0.0598067612060849,1990:0.055714959287794,1991:0.0407853391098788,1992:0.0378624870085018,1993:0.0318833828871248,1994:0.0318493712404617,1995:0.0298844508658787,1996:0.028168641944968,1997:0.0269136811546422,1998:0.0237757736496353,1999:0.0230751900422,2000:0.0218900165320061,2001:0.0209663181604632,2002:0.0206506527984211,2003:0.0217620423785641,2004:0.022256081838489,2005:0.0225869130643005,2006:0.0220997204954127,2007:0.0248381340491657,2008:0.0217421483962871,2009:0.0210776293913239,2010:0.0219480172453662,2011:0.0208674809674085,2012:0.0183792755638822,2013:0.0165283989346171,2014:0.0163549356254213,2015:0.0152745277750979,2016:0.0149093469250927,2017:0.014588748680714,2018:0.0141863584536405,2019:0.0139042383626782,2020:0.0136202229159914,2021:0.013342009939796,2022:0.0130694773121063}
,"IQD":{1998:0.000617299856486186,1999:0.000507086693903875,2000:0.000518132576213601,2001:0.000518400720636135,2002:0.000510997214970899,2003:0.000526857512019437,2004:0.000688301923539203,2005:0.00068084522831529,2006:0.000681508459930961,2007:0.000797024377723574,2008:0.000838166596829003,2009:0.000854700939750802,2010:0.000854702563421544,2011:0.000854702400285483,2012:0.000857632329245851,2013:0.000857634121181013,2014:0.000857633077295711,2015:0.000857633468892655,2016:0.000847337521527683,2017:0.000846025152425268,2018:0.000846024933783421,2019:0.000846025158370085,2020:0.000846025503190113,2021:0.000846024244458411,2022:0.000846022693902905}
,"JMD":{1980:0.561883899233297,1981:0.561714855433699,1982:0.561827023271969,1983:0.404815544916925,1984:0.229353826171664,1985:0.176982505994139,1986:0.181811204911742,1987:0.181818181818182,1988:0.181797419207491,1989:0.175425258956571,1990:0.138874825029038,1991:0.0826470191139314,1992:0.0434765138425684,1993:0.040083422351086,1994:0.0302251717898397,1995:0.0283330157795368,1996:0.0269411508299144,1997:0.02824586070132,1998:0.0273582862112556,1999:0.0256131200916477,2000:0.0234178288958127,2001:0.0217410562683636,2002:0.0206552028667615,2003:0.0173184346784613,2004:0.0163414478693892,2005:0.0160404201886196,2006:0.0152305567360816,2007:0.0145444157392687,2008:0.0137782723772859,2009:0.0113645430387363,2010:0.011444067467254,2011:0.0116170977492226,2012:0.0112359550561798,2013:0.00992454744538809,2014:0.00899191097729223,2015:0.00852810682386502,2016:0.00796289799515689,2017:0.00767769374759568,2018:0.00747491869439286,2019:0.00725844209453151,2020:0.00706821220818819,2021:0.00690086819400647,2022:0.00673919242004795}
,"JOD":{1980:3.35450643776824,1981:3.02829537612146,1982:2.83878787878788,1983:2.75433687744824,1984:2.60314136125655,1985:2.53729071537291,1986:2.85765283355645,1987:2.95190205509401,1988:2.69106382978723,1989:1.75267930750206,1990:1.50706265845708,1991:1.46889790398918,1992:1.47095890410959,1993:1.42430484037075,1994:1.42198256080771,1995:1.41039236479321,1996:1.41042345276873,1997:1.41027637212923,1998:1.41033868092692,1999:1.41034960193839,2000:1.41040173362227,2001:1.41049819267641,2002:1.41036208419193,2003:1.41043021164753,2004:1.41033246817451,2005:1.41053221288515,2006:1.41049180327869,2007:1.41051850630616,2008:1.40851664208299,2009:1.40846736045412,2010:1.40843193689372,2011:1.40840943497583,2012:1.41047120418848,2013:1.4104058359886,2014:1.4104650705665,2015:1.41044411908248,2016:1.41042084168337,2017:1.41045114091622,2018:1.41044083526682,2019:1.41043483736893,2020:1.41045466758217,2021:1.41043404495971,2022:1.41043496893079}
,"JPY":{1980:0.004410332,1981:0.004535417,1982:0.004016638,1983:0.004210541,1984:0.004210282,1985:0.004193114,1986:0.005935684,1987:0.006915719,1988:0.007804625,1989:0.007249624,1990:0.006907964,1991:0.007433207,1992:0.007896326,1993:0.008994106,1994:0.009785071,1995:0.01063485,1996:0.009193525,1997:0.008266923,1998:0.007642782,1999:0.008748262,2000:0.009278992,2001:0.008230816,2002:0.007975401,2003:0.00862897,2004:0.009243936,2005:0.009073996,2006:0.00859869,2007:0.008492314,2008:0.00967497,2009:0.010687175,2010:0.011392132,2011:0.012530227,2012:0.012532827,2013:0.010246357,2014:0.009438878,2015:0.008261456,2016:0.009191777,2017:0.00897624,2018:0.009164911,2019:0.009251302,2020:0.009239746,2021:0.009259585,2022:0.009288283}
,"KES":{1980:0.134761142247131,1981:0.110537874298463,1982:0.0915588699842054,1983:0.0751232837833044,1984:0.0693743832642589,1985:0.0608565563789444,1986:0.0616285554935862,1987:0.0607731268246081,1988:0.0563295608527206,1989:0.0485428840403605,1990:0.0437339767757503,1991:0.036355072830265,1992:0.0310826941810848,1993:0.0172401705394427,1994:0.0178411152306545,1995:0.0194443133034983,1996:0.0175080150957423,1997:0.0158596063604615,1998:0.0165652934000899,1999:0.0142192114395651,2000:0.0131272252485499,2001:0.0127283012061064,2002:0.0126988714312378,2003:0.0131688610848237,2004:0.0126304631612656,2005:0.0132353209948202,2006:0.0138697268212676,2007:0.0148548654820766,2008:0.0144559651848648,2009:0.0129280843443839,2010:0.0126210795377277,2011:0.0111843577877989,2012:0.0118323449970315,2013:0.0116173551813623,2014:0.0113919570680334,2015:0.0102217918795574,2016:0.00985193943251085,2017:0.00962853318667272,2018:0.0094052322757643,2019:0.00912334640076837,2020:0.00881529323361455,2021:0.008563651142764,2022:0.00836027174679691}
,"LBP":{1980:0.291,1981:0.231785714285714,1982:0.210810381776331,1983:0.220841127134496,1984:0.153597671364169,1985:0.0609145611758162,1986:0.0260601687388988,1987:0.00445228642052642,1988:0.00244395280235988,1989:0.00201333333333333,1990:0.00143841865179929,1991:0.00107744433688287,1992:0.000583850931677019,1993:0.000574243994634801,1994:0.000595230316889905,1995:0.000616776258768011,1996:0.000636566574323617,1997:0.000649573002186559,1998:0.000659583396917442,1999:0.00066319920743789,2000:0.000663359101573016,2001:0.000663361483939074,2002:0.000663342599027102,2003:0.000663363676060596,2004:0.000663365024965281,2005:0.000663351084225585,2006:0.000663360025483808,2007:0.000663337046986041,2008:0.000663360290269831,2009:0.000663344329425952,2010:0.000663356365312664,2011:0.000663355308288321,2012:0.000663356492215507,2013:0.00066334664654224,2014:0.000663344181328258,2015:0.000663345944627144,2016:0.000663354478080511,2017:0.000663348564369225,2018:0.000663352224633647,2019:0.000663349096353942,2020:0.0006633479728999,2021:0.000663350204272687,2022:0.000663354627255062}
,"LKR":{1980:0.0604769299290985,1981:0.0519604432738657,1982:0.0480495819924742,1983:0.04233278445922,1984:0.0392462866594497,1985:0.0367547205153153,1986:0.0356396399789109,1987:0.033858852732887,1988:0.0313610863723901,1989:0.0277413490660647,1990:0.0248585493928454,1991:0.0235228182909369,1992:0.0222018709486453,1993:0.0202061883565814,1994:0.0201057737899843,1995:0.0185159412955466,1996:0.017654272782767,1997:0.0169754023686608,1998:0.0152955451206132,1999:0.014156723144852,2000:0.013013020409973,2001:0.0111714941408185,2002:0.0104599661286162,2003:0.0103661050754169,2004:0.00988556894991061,2005:0.00995508190098781,2006:0.00962149429754231,2007:0.00904444751544439,2008:0.009232058432856,2009:0.00869439507607347,2010:0.0088420541880247,2011:0.00904087015760677,2012:0.00783501745154832,2013:0.00776303478113557,2014:0.00765725738385629,2015:0.00726508545024309,2016:0.00680101106725878,2017:0.00638035503900081,2018:0.00605251353739422,2019:0.00592439452121065,2020:0.00580246026920797,2021:0.00567643512128942,2022:0.00554129800416623}
,"LSL":{1980:1.28686327077748,1981:1.14858490566038,1982:0.92255125284738,1983:0.899193548387097,1984:0.695121951219512,1985:0.45702005730659,1986:0.440963855421687,1987:0.491264131551901,1988:0.440032414910859,1989:0.381081081081081,1990:0.386712095400341,1991:0.362101313320826,1992:0.350822239624119,1993:0.30585015395142,1994:0.281576590026874,1995:0.275611024440978,1996:0.232676709154114,1997:0.216981132075472,1998:0.180890538033395,1999:0.163757700205339,2000:0.144074360960496,2001:0.116244208231126,2002:0.0948370560234346,2003:0.132181277180133,2004:0.154768163179476,2005:0.157289370267421,2006:0.147722435078757,2007:0.141944383939592,2008:0.121017118580532,2009:0.118000466635558,2010:0.13657419455577,2011:0.137700037216226,2012:0.121787370519655,2013:0.103589543503707,2014:0.0921460373998219,2015:0.0784216934873466,2016:0.0679675773041129,2017:0.0729803669134213,2018:0.0711727068356432,2019:0.0687320892659702,2020:0.0662339000515198,2021:0.0636692196775341,2022:0.0612034073396671}
,"MGA":{1980:0.0236651053864169,1981:0.018401642071426,1982:0.0142960241970143,1983:0.0116174062618878,1984:0.00866961651917404,1985:0.00754806676526516,1986:0.00739177783827934,1987:0.00467701953922426,1988:0.00355272346368715,1989:0.0031183681621851,1990:0.00334607615282695,1991:0.00272407196352979,1992:0.00268276984141174,1993:0.00261281371591561,1994:0.00163012528473804,1995:0.00117222204704839,1996:0.00123116654185504,1997:0.000982264121570282,1998:0.000918800230756997,1999:0.000795631871973616,2000:0.000738889600214617,2001:0.000758969918654509,2002:0.000731812454958666,2003:0.000807537806311895,2004:0.000535094223299822,2005:0.000499215659778039,2006:0.000466797464738004,2007:0.000533658610962873,2008:0.000585352846255673,2009:0.000511171885761513,2010:0.00047848384747053,2011:0.000493813356720377,2012:0.000455597876454624,2013:0.000453134591231311,2014:0.000414129682649949,2015:0.000340880241361682,2016:0.000314801926130741,2017:0.00029545971861387,2018:0.000277755594438408,2019:0.000265077955963552,2020:0.00025588521611457,2021:0.000247844242150826,2022:0.000239742408062335}
,"MMK":{1998:0.00401251693901201,1999:0.00387479847243293,2000:0.00348859668571413,2001:0.0018254286467047,2002:0.00120489345998089,2003:0.00135643632297539,2004:0.00116389558232164,2005:0.000975608722192078,2006:0.000860554744895507,2007:0.000864859283116838,2008:0.00108994925526191,2009:0.00108887654636488,2010:0.0012454758450065,2011:0.00129517891206785,2012:0.00116527238200473,2013:0.00103656808378376,2014:0.00100479462097546,2015:0.000818067811158456,2016:0.000793388392264109,2017:0.000718724604803696,2018:0.000691735441227324,2019:0.000667956905570842,2020:0.000644690303519675,2021:0.00062232000429227,2022:0.000601434377866117}
,"MWK":{1980:1.23121055651176,1981:1.1165452653486,1982:0.947222222222222,1983:0.851123595505618,1984:0.707531239446133,1985:0.58167803142603,1986:0.537391760692732,1987:0.4527665317139,1988:0.390416736966425,1989:0.362400439439714,1990:0.366491506782354,1991:0.356702763256161,1992:0.277481323372465,1993:0.227149092289202,1994:0.114485338614733,1995:0.0654210654210654,1996:0.0653322763905404,1997:0.0608219322386527,1998:0.0321865889212828,1999:0.0226850897092184,2000:0.0167923920409728,2001:0.0138494069541107,2002:0.013041564390859,2003:0.0102693834212302,2004:0.00918206696886127,2005:0.00844478322130598,2006:0.00735217043500648,2007:0.00714191308496475,2008:0.00711627166744904,2009:0.00708824666869569,2010:0.00664256742821788,2011:0.00637317900618639,2012:0.00398273195035336,2013:0.00270098253709376,2014:0.00235631443624934,2015:0.0020015234824384,2016:0.00140047124619999,2017:0.00136239870954012,2018:0.00128642508425817,2019:0.0012020056960579,2020:0.00114361907099282,2021:0.00111000630933904,2022:0.00109706869771492}
,"MZN":{1980:28.7287234042553,1981:28.3445945945946,1982:26.4506172839506,1983:24.9220779220779,1984:23.5176470588235,1985:23.1798245614035,1986:24.7131474103586,1987:3.45622688039457,1988:1.89170506912442,1989:1.25991189427313,1990:1.07272727272727,1991:0.697074756229686,1992:0.380527879741304,1993:0.244997295835587,1994:0.165577635567531,1995:0.110842738570989,1996:0.0885529709164262,1997:0.0866083658202507,1998:0.0843826012305051,1999:0.0788048866045419,2000:0.0637411565462045,2001:0.0482881854130982,2002:0.0422563910987341,2003:0.0420499840863279,2004:0.0442853580755653,2005:0.0433628318584071,2006:0.0400293085496124,2007:0.0391095613085549,2008:0.0413666939938639,2009:0.0374429679954707,2010:0.0303242962657936,2011:0.0344020833551659,2012:0.0350432441667706,2013:0.0332059398672426,2014:0.0317275850591507,2015:0.0250101828863286,2016:0.0163548859351173,2017:0.015267562644003,2018:0.0163524577446995,2019:0.0157756605791705,2020:0.0152347676550369,2021:0.0147006285560061,2022:0.0141868514353073}
,"NIO":{1989:297.428571428571,1990:1,1991:0.234178021138418,1992:0.2,1993:0.159469291675583,1994:0.14872308462694,1995:0.132785938803002,1996:0.118543793511461,1997:0.105841791836439,1998:0.0944934863713278,1999:0.0846789662748928,2000:0.0788279948157749,2001:0.0745496974693627,2002:0.0701726106521593,2003:0.0662022639631795,2004:0.062747094440172,2005:0.0597577923367084,2006:0.056917820899039,2007:0.054202263599854,2008:0.0516214869807171,2009:0.0491554644501188,2010:0.0468263005672189,2011:0.0445930778987326,2012:0.0424687694057114,2013:0.0404485692188708,2014:0.0385210260600578,2015:0.0366887985195546,2016:0.0349389031349941,2017:0.0332764629540516,2018:0.0316918099230699,2019:0.0301837678231477,2020:0.0287463341711546,2021:0.0273765140850518,2022:0.0260735773030855}
,"NGN":{1990:0.124410369098438,1991:0.100883322567927,1992:0.057457493545306,1993:0.0451182221798629,1994:0.045454622810247,1995:0.0456721312268129,1996:0.0456946077314559,1997:0.0456912459040077,1998:0.0456913176973582,1999:0.0108296739510137,2000:0.0098331536059101,2001:0.00899025367395848,2002:0.00829340820399968,2003:0.00773856658456351,2004:0.00752513019378747,2005:0.00761765458412217,2006:0.00777291725984946,2007:0.00794702071053333,2008:0.00843406145235018,2009:0.00671681679724008,2010:0.00665344002312196,2011:0.00649934320683538,2012:0.00634923337282527,2013:0.00635681054793691,2014:0.00630702258346005,2015:0.00518861890137837,2016:0.00395262338631052,2017:0.00328490253244954,2018:0.00328265650698754,2019:0.0032832740359097,2020:0.00309185633654386,2021:0.00275071740169429,2022:0.00244905320653745}
,"NPR":{1980:0.0833368407761269,1981:0.0833213360207313,1982:0.0773042616451933,1983:0.072486338024181,1984:0.0648312185779267,1985:0.0562265056386467,1986:0.051151750192237,1987:0.0463098016336056,1988:0.0453361756761667,1989:0.0394853547316686,1990:0.0350744453751993,1991:0.032060494338061,1992:0.02361782071927,1993:0.0220465427012582,1994:0.0203061820731565,1995:0.0200431803886235,1996:0.0181912078947073,1997:0.0175466560403799,1998:0.0162647692650665,1999:0.0147172565552251,2000:0.014067462947417,2001:0.0133425741587565,2002:0.0130070541938826,2003:0.012855752685223,2004:0.0135519581778448,2005:0.0138782379727593,2006:0.0138269702362388,2007:0.0141860634463959,2008:0.0153802206316863,2009:0.0130075525766186,2010:0.0134157853876761,2011:0.0139075638243862,2012:0.0123429954221184,2013:0.0113686577845218,2014:0.0101779551447158,2015:0.0100514048306457,2016:0.00940720210267119,2017:0.00925849692640216,2018:0.00902007134449376,2019:0.00879110915501272,2020:0.00860948495172887,2021:0.00842562877885474,2022:0.00824514652034401}
,"NZD":{1980:0.97417485,1981:0.869947667,1982:0.751846812,1983:0.668801382,1984:0.578488222,1985:0.498406233,1986:0.523911505,1987:0.592206543,1988:0.655959926,1989:0.598457067,1990:0.596948357,1991:0.579146012,1992:0.538125178,1993:0.540737254,1994:0.593691751,1995:0.656438611,1996:0.687631299,1997:0.663025275,1998:0.536657058,1999:0.529547275,2000:0.457370235,2001:0.420640327,2002:0.464225592,2003:0.58226722,2004:0.664008419,2005:0.704355401,2006:0.649502654,2007:0.736125506,2008:0.714574205,2009:0.63414164,2010:0.721296177,2011:0.791166446,2012:0.810575543,2013:0.820528926,2014:0.830839561,2015:0.700273085,2016:0.696963421,2017:0.722302743,2018:0.736665879,2019:0.738869025,2020:0.739069243,2021:0.738438735,2022:0.737623088}
,"NOK":{1980:0.202489011,1981:0.17425359,1982:0.154957027,1983:0.13706225,1984:0.122571996,1985:0.116350731,1986:0.135267643,1987:0.148438435,1988:0.153459502,1989:0.144853133,1990:0.159757821,1991:0.154290603,1992:0.160980355,1993:0.140597546,1994:0.141649475,1995:0.157868561,1996:0.155045816,1997:0.141391927,1998:0.132549055,1999:0.128241877,2000:0.113624637,2001:0.111222465,2002:0.125256621,2003:0.140539746,2004:0.148261401,2005:0.155197665,2006:0.155911673,2007:0.170599878,2008:0.177304926,2009:0.159024702,2010:0.165448819,2011:0.17842472,2012:0.171895135,2013:0.170212697,2014:0.158688257,2015:0.124005512,2016:0.119047726,2017:0.118606067,2018:0.11795433,2019:0.116157731,2020:0.113787546,2021:0.111320305,2022:0.108939779}
,"PHP":{1980:0.13313117733095,1981:0.126587741817914,1982:0.117096071914144,1983:0.0899872669883256,1984:0.0598325368707259,1985:0.0535162177989635,1986:0.0490499474369798,1987:0.0486174018415303,1988:0.0474054414534575,1989:0.0460050663844226,1990:0.0411343168033621,1991:0.0363915651410462,1992:0.0391962939985829,1993:0.03687312113093,1994:0.037854336270919,1995:0.0388884995245546,1996:0.0381451370269466,1997:0.0339321438945461,1998:0.0244540535268335,1999:0.0255826017963767,2000:0.022627610024146,2001:0.0196106717726106,2002:0.0193785884675985,2003:0.018449014555962,2004:0.0178443823620454,2005:0.0181540222799524,2006:0.0194877914872806,2007:0.021669236285641,2008:0.0224848052099605,2009:0.0209920256840677,2010:0.0221682060714302,2011:0.0230876941579666,2012:0.0236805124926037,2013:0.023559225231206,2014:0.0225249950788286,2015:0.0219766625849598,2016:0.0210559972156081,2017:0.0202402381775348,2018:0.0205128240409252,2019:0.0207253850905,2020:0.0209424073847447,2021:0.0211640147833004,2022:0.0212766007429268}
,"PKR":{1980:0.101010496759554,1981:0.101011522804112,1982:0.0947729447544696,1983:0.078741036830383,1984:0.0742070474107185,1985:0.0659671969063749,1986:0.0619922642106331,1987:0.0582575445646007,1988:0.0569646011864025,1989:0.0521878426774632,1990:0.0467474129276048,1991:0.0447046972359442,1992:0.0403546666514688,1993:0.0386179688103916,1994:0.0332426141782942,1995:0.032496915018105,1996:0.0298658808885216,1997:0.0257111841513907,1998:0.0232254625882138,1999:0.0214332243157659,2000:0.0193284312845835,2001:0.017175964096939,2002:0.0162402786917425,2003:0.0170677216839934,2004:0.0173715123777803,2005:0.016912064686524,2006:0.01670318007439,2007:0.0164905334387615,2008:0.016060975926162,2009:0.0127180853332578,2010:0.0119167315307006,2011:0.0116865210073734,2012:0.0111931758661113,2013:0.0103288458319539,2014:0.00970888367564531,2015:0.00985882677206614,2016:0.0095837730129545}
,"CHF":{1980:0.596763189,1981:0.509260644,1982:0.492634757,1983:0.476420022,1984:0.425648481,1985:0.407176788,1986:0.556087834,1987:0.670756277,1988:0.683497408,1989:0.611410382,1990:0.719968083,1991:0.697523728,1992:0.711414334,1993:0.676842046,1994:0.731272328,1995:0.845923023,1996:0.809151422,1997:0.689140153,1998:0.689813937,1999:0.665732958,2000:0.592212696,2001:0.592668198,2002:0.641678813,2003:0.742731287,2004:0.804217587,2005:0.803193235,2006:0.797602309,2007:0.833133816,2008:0.925566289,2009:0.921177644,2010:0.95885936,2011:1.126074277,2012:1.066457035,2013:1.07886084,2014:1.091523697,2015:1.039089418,2016:1.01498266,2017:1.020639364,2018:1.038411784,2019:1.043487965,2020:1.045613409,2021:1.04534651,2022:1.044373164}
,"GBP":{1980:2.32628255,1981:2.027903422,1982:1.750519422,1983:1.516993365,1984:1.336335286,1985:1.296331166,1986:1.467005831,1987:1.638903042,1988:1.781361189,1989:1.639704073,1990:1.784712982,1991:1.769367857,1992:1.765524745,1993:1.502019263,1994:1.531605042,1995:1.578466878,1996:1.561740396,1997:1.637694852,1998:1.656412066,1999:1.618224548,2000:1.516105186,2001:1.439964304,2002:1.501258685,2003:1.634373725,2004:1.831799852,2005:1.820401071,2006:1.842629791,2007:2.001679415,2008:1.853244234,2009:1.564477883,2010:1.546113395,2011:1.603604799,2012:1.585306416,2013:1.564467053,2014:1.647422194,2015:1.528959574,2016:1.35550518,2017:1.278857098,2018:1.285666251,2019:1.275525123,2020:1.263879967,2021:1.25191965,2022:1.240450746}
,"USD":{1980:1,1981:1,1982:1,1983:1,1984:1,1985:1,1986:1,1987:1,1988:1,1989:1,1990:1,1991:1,1992:1,1993:1,1994:1,1995:1,1996:1,1997:1,1998:1,1999:1,2000:1,2001:1,2002:1,2003:1,2004:1,2005:1,2006:1,2007:1,2008:1,2009:1,2010:1,2011:1,2012:1,2013:1,2014:1,2015:1,2016:1,2017:1,2018:1,2019:1,2020:1,2021:1,2022:1}
,"RON":{1980:558.409638554217,1981:662.785714285714,1982:663.440476190476,1983:579.892857142857,1984:468.583333333333,1985:585.481927710843,1986:619.117647058824,1987:684.325581395349,1988:700.287356321839,1989:673.864197530864,1990:445.540229885057,1991:130.607142857143,1992:32.4730831973899,1993:13.154148257241,1994:6.04169960474308,1995:4.91845083867449,1996:3.24401697823535,1997:1.39509197682106,1998:1.12668087681903,1999:0.652192721570324,2000:0.46097816056598,2001:0.344105740870638,2002:0.302522439887309,2003:0.301205970990285,2004:0.306402463537395,2005:0.343210930534375,2006:0.356001659923229,2007:0.410461963668358,2008:0.399825320515877,2009:0.329144818157066,2010:0.314650643120845,2011:0.329346997064221,2012:0.288329719315985,2013:0.30050701538616,2014:0.298652685648603,2015:0.249645972524374,2016:0.246355095512125,2017:0.247567127470924,2018:0.258688465015688,2019:0.260156851732163,2020:0.260870156237408,2021:0.260247309784198,2022:0.248004833845179}
,"RWF":{1980:0.010771270907302,1981:0.0107697873174261,1982:0.0107738065801465,1983:0.0106021555763824,1984:0.00907456852171789,1985:0.00987297798427143,1986:0.0114124232378675,1987:0.0125498683636716,1988:0.0130826909968014,1989:0.0125046802546058,1990:0.0121079851457236,1991:0.00798938807463141,1992:0.0074667156789542,1993:0.00693343752534151,1994:0.00710459509753212,1995:0.00381345759644447,1996:0.0032616245464569,1997:0.00330811384449303,1998:0.00318836798819098,1999:0.00296046128500824,2000:0.0025414201183432,2001:0.00225876010781671,2002:0.00209284818067754,2003:0.00184793554884189,2004:0.00173383084577114,2005:0.00179444444444444,2006:0.00181196089706728,2007:0.00182887189292543,2008:0.00182957110609481,2009:0.00175989532221132,2010:0.00171487971487971,2011:0.00166589684372594,2012:0.00162794837561193,2013:0.00154656116859404,2014:0.00146542261251372,2015:0.00138969106783076,2016:0.0012701722574796,2017:0.00118154025524078,2018:0.00110678506393968,2019:0.00103409744846488,2020:0.000985255960534082,2021:0.000956558703611404,2022:0.000928638919889236}
,"SDG":{1980:1980.4,1981:1184.83333333333,1982:738.428571428571,1983:784.444444444444,1984:791,1985:431.357142857143,1986:402.8,1987:361.805555555556,1988:221.234042553191,1989:221.048192771084,1990:22.2181818181818,1991:14.259067357513,1992:10.258358662614,1993:6.27692307692308,1994:3.45212765957447,1995:1.72171037089535,1996:0.799509073375997,1997:0.634599794627898,1998:0.497974282191298,1999:0.395964691046658,2000:0.388925908297636,2001:0.386534908952292,2002:0.379797824302135,2003:0.383162146316041,2004:0.387744407098197,2005:0.410505625802857,2006:0.460500096419618,2007:0.496001469730045,2008:0.478428344549834,2009:0.434496459930997,2010:0.433652295736301,2011:0.375006973500697,2012:0.279879018567165,2013:0.21022583222883,2014:0.174311274161194,2015:0.165776152122274,2016:0.159071374649351,2017:0.154303759710532,2018:0.154304130503158,2019:0.154304686607245,2020:0.154304381977188,2021:0.154304081962835,2022:0.154304354546302}
,"SEK":{1980:0.236449223408788,1981:0.197532546027928,1982:0.159241141118818,1983:0.130431624884528,1984:0.120902656994424,1985:0.116251978447813,1986:0.140396421947877,1987:0.157731707252629,1988:0.163221231495705,1989:0.155131831369423,1990:0.168959842414168,1991:0.165394857854127,1992:0.171822230908556,1993:0.128497654104842,1994:0.129619767569176,1995:0.140207224397179,1996:0.149135751348973,1997:0.130993467412088,1998:0.12580120007336,1999:0.120979742199446,2000:0.109159630610186,2001:0.0968298676824864,2002:0.102705344538024,2003:0.123665986167415,2004:0.136088181767949,2005:0.133813518280552,2006:0.1355295327873,2007:0.147955765345598,2008:0.151719846416297,2009:0.130653740038419,2010:0.138743986495432,2011:0.15399921839469,2012:0.147601226660877,2013:0.153516172406284,2014:0.145755987035287,2015:0.118555797357779,2016:0.116795301491871,2017:0.117498809592989,2018:0.124047871322366,2019:0.12507956517294,2020:0.125844649949376,2021:0.126560264851853,2022:0.127508337805995}
,"SLL":{1980:0.952407614781635,1981:0.862346263008515,1982:0.807086614173228,1983:0.530357142857143,1984:0.398377125193199,1985:0.196308724832215,1986:0.0621247222353553,1987:0.0293755451793319,1988:0.0307568781031347,1989:0.0167178999835148,1990:0.00660286681432572,1991:0.00338517187630142,1992:0.00200166267141254,1993:0.0017622280090593,1994:0.00170477760401257,1995:0.00132654741286782,1996:0.00108590075625796,1997:0.00101824631706876,1998:0.00063942036315948,1999:0.000554353290430058,2000:0.000484721486039661,2001:0.000500420787405646,2002:0.0004750718403637,2003:0.000424059410108777,2004:0.00036770680760987,2005:0.000345717671309501,2006:0.000337393939838936,2007:0.000335041335472591,2008:0.000336120055497959,2009:0.000295367496624457,2010:0.000251374515460508,2011:0.000229893805784119,2012:0.000230224770102219,2013:0.000230612744065545,2014:0.000220676064725652,2015:0.00019701571237374,2016:0.000155822187427338,2017:0.00013236948961049,2018:0.000121776226144712,2019:0.000113573390677653,2020:0.000106383755619421,2021:0.000100141256684171,2022:9.47015889212764e-05}
,"SSP":{2011:0.332868487313577,2012:0.338989680175708,2013:0.338975359622453,2014:0.33899066091954,2015:0.279926459048003,2016:0.0212986904371946,2017:0.00875796178343949,2018:0.00709206814822308,2019:0.00624705017288772,2020:0.00590818233642904,2021:0.00560273398850317,2022:0.00538396068039579}
,"SZL":{1980:1.28314606741573,1981:1.1394422310757,1982:0.920741989881956,1983:0.896969696969697,1984:0.677528852681602,1985:0.4487743557511,1986:0.438247011952191,1987:0.491161012900143,1988:0.440203562340967,1989:0.381247719810288,1990:0.386549340037712,1991:0.362107623318386,1992:0.350595672258692,1993:0.306084437086093,1994:0.281660535995796,1995:0.275759717314488,1996:0.232686286787727,1997:0.217025461698175,1998:0.1807335831197,1999:0.163578852236783,2000:0.144163658243081,2001:0.116255442670537,2002:0.0950724637681159,2003:0.132189942830475,2004:0.15501816407309,2005:0.157203759325647,2006:0.147751322751323,2007:0.141754442389644,2008:0.121177107781188,2009:0.118537774167344,2010:0.136572035828146,2011:0.137878402442127,2012:0.121813756884847,2013:0.103612367847348,2014:0.0922051194100244,2015:0.0784090682312559,2016:0.0679737153937305,2017:0.0684943148019104,2018:0.0657462088370495,2019:0.0633241672395475,2020:0.0610156998599543,2021:0.0586814279009414,2022:0.056382621281435}
,"THB":{1980:0.0488367267615677,1981:0.0458285912154335,1982:0.0434773106846592,1983:0.0434782151712337,1984:0.0423018707108113,1985:0.0368200185085075,1986:0.0380243075425126,1987:0.0388756417340484,1988:0.0395352633025946,1989:0.0389072381631542,1990:0.039084731520274,1991:0.039189995242871,1992:0.0393698695278654,1993:0.0394951460713683,1994:0.0397615672157632,1995:0.0401362478124454,1996:0.0394590615066383,1997:0.0318833263026402,1998:0.0241783629642848,1999:0.0264454558949071,2000:0.0249302589064746,2001:0.0225063998908889,2002:0.0232774390085375,2003:0.0241053854952636,2004:0.024861700097681,2005:0.0248631246364623,2006:0.0263978225507416,2007:0.0289702629053865,2008:0.0300180324741123,2009:0.0291665838394079,2010:0.0315599772801102,2011:0.0327957439063283,2012:0.0321718238881538,2013:0.0325457470324273,2014:0.0307883244284062,2015:0.0291968800979166,2016:0.0283372696742859,2017:0.0288589683841807,2018:0.0292017537711336,2019:0.0295060482515681,2020:0.0295987321142052,2021:0.0295556801227803,2022:0.0294898749585039}
,"TTD":{1980:0.416677803020179,1981:0.416661700732972,1982:0.416645339612018,1983:0.416680083722428,1984:0.416662190471075,1985:0.408167782635161,1986:0.277752027809965,1987:0.277790643816582,1988:0.260167775527914,1989:0.23529091601807,1990:0.235294117647059,1991:0.235294117647059,1992:0.235314473570378,1993:0.186857165726178,1994:0.168770469432314,1995:0.168123166230243,1996:0.166536559979183,1997:0.15996208636503,1998:0.158781032444503,1999:0.158735340063886,2000:0.158727686827198,2001:0.16043412656571,2002:0.160028424231657,2003:0.158847250909806,2004:0.158751031044912,2005:0.158737410857949,2006:0.158420367224086,2007:0.158026169752906,2008:0.158996388779544,2009:0.158103907454589,2010:0.156850808392559,2011:0.156023017275226,2012:0.155529863259142,2013:0.155215537993635,2014:0.156028706993157,2015:0.156801799703155,2016:0.149887539999574,2017:0.145527015692544,2018:0.145524763697169,2019:0.145523017635268,2020:0.145524849017807,2021:0.145525740237049,2022:0.14552703712933}
,"TZS":{1980:0.121799717356295,1981:0.121843946286955,1982:0.115649891485905,1983:0.102443913799711,1984:0.0790884606725646,1985:0.0559423188803692,1986:0.0536307311028501,1987:0.019546661191206,1988:0.0121530371919938,1989:0.00837424365713228,1990:0.00512609751541192,1991:0.00456236495976947,1992:0.00335913207290224,1993:0.00246765898572851,1994:0.0019623904913605,1995:0.00173999960705725,1996:0.00172428123023619,1997:0.00163378135192032,1998:0.00150446294301214,1999:0.00134274409346811,2000:0.00124935561087687,2001:0.00114102589357827,2002:0.00103457245878247,2003:0.000962988451066562,2004:0.000917980640982772,2005:0.000885792423204727,2006:0.000798766097379502,2007:0.00080319958975634,2008:0.000835283080023952,2009:0.000757392140933994,2010:0.000709142878808016,2011:0.000636492744735137,2012:0.000636257835088441,2013:0.000625961663449077,2014:0.000605330642796515,2015:0.00050221910305676,2016:0.000459320199357613,2017:0.00044433796617403,2018:0.000434278315610478,2019:0.000422197586594914,2020:0.000409985770959956,2021:0.000398122267681096,2022:0.000386610399186558}
,"UAH":{1992:426.788461538462,1993:22.069943289225,1994:3.05341794521648,1995:0.678863446905873,1996:0.546602932106087,1997:0.537153450222144,1998:0.408235393909692,1999:0.242105497242484,2000:0.183815837351042,2001:0.186144193204688,2002:0.187735438074981,2003:0.18752140758234,2004:0.188021614123017,2005:0.195226589405784,2006:0.198020240063148,2007:0.198019986526536,2008:0.189984245356619,2009:0.128349112288579,2010:0.126012418631282,2011:0.125509330449211,2012:0.125087832080013,2013:0.122558179850095,2014:0.0833964011935107,2015:0.0457314497441344,2016:0.0391338135316564,2017:0.0367314897110742,2018:0.0344219156555279,2019:0.0334865062204167,2020:0.0325667866910761,2021:0.0319252424000695,2022:0.0312922939050222}
,"UGX":{1980:3.33275563258232,1981:3.33369022127052,1982:1.42847696715892,1983:1.11106115107914,1984:0.434812442817932,1985:0.196092429081345,1986:0.0917416622551614,1987:0.0505057198450612,1988:0.0166670824641567,1989:0.0058961800022275,1990:0.00312865511412264,1991:0.00136247135249774,1992:0.000881854978336631,1993:0.000836871295087921,1994:0.00102094519271535,1995:0.00103211286584235,1996:0.000955904713797079,1997:0.000923417614190991,1998:0.00080621595936458,1999:0.000687359427073547,2000:0.000608117194701873,2001:0.000569631751324755,2002:0.000556355019613356,2003:0.000509218181966891,2004:0.000552386509741338,2005:0.000561589817908171,2006:0.000546010670228978,2007:0.000580223771119197,2008:0.000581254963071018,2009:0.000492483170443312,2010:0.000459237335659118,2011:0.00039640236124199,2012:0.000399278310767116,2013:0.000386557255745445,2014:0.000384652543793468,2015:0.000308589944107981,2016:0.000292379547124681,2017:0.000276249952791206,2018:0.000267392552237678,2019:0.00026105061668361,2020:0.000261324783235101,2021:0.00024499966876121,2022:0.000242023820846027}
,"VND":{1980:4.87432172238754,1981:1.73004987531172,1982:1.06092921374222,1983:0.998235823582358,1984:0.970547351880578,1985:0.149297260710304,1986:0.0555561022653467,1987:0.0161394398468548,1988:0.00208332156454813,1989:0.000224005980137401,1990:0.000154260517220832,1991:9.96258490098687e-05,1992:8.92682662034524e-05,1993:9.39768141567682e-05,1994:9.13663503870411e-05,1995:9.0863813501564e-05,1996:9.07673984325604e-05,1997:8.57462622320429e-05,1998:7.54370997407317e-05,1999:7.17654059838677e-05,2000:7.05904729126948e-05,2001:6.75760188657684e-05,2002:6.55085653704443e-05,2003:6.4493367075717e-05,2004:6.35411348716148e-05,2005:6.30721521689982e-05,2006:6.25425952089493e-05,2007:6.21766999588005e-05,2008:6.08082513415362e-05,2009:5.61777956425313e-05,2010:5.22613359480533e-05,2011:4.8418632665152e-05,2012:4.79337149129424e-05,2013:4.75872074685335e-05,2014:4.72076673402389e-05,2015:4.56618858170093e-05,2016:4.47081806742239e-05,2017:4.34937266855145e-05,2018:4.27824395726602e-05,2019:4.22010001020186e-05,2020:4.15291718696602e-05,2021:4.07888889333492e-05,2022:4.00788097862955e-05}
,"XAF":{1980:0.00423990498812352,1981:0.00340669417698304,1982:0.00299084858569052,1983:0.00271760535643954,1984:0.00240401865805526,1985:0.00232429586733351,1986:0.0029996736106434,1987:0.00351973675129678,1988:0.00360892129552909,1989:0.00336076885654432,1990:0.00388151981747968,1991:0.00378122412713798,1992:0.00395387673114432,1993:0.00357411022676077,1994:0.00181158272788887,1995:0.0019945110769467,1996:0.00193555754702921,1997:0.00172957197068738,1998:0.00170844327176781,1999:0.00162682587326416,2000:0.00140873319070905,2001:0.00136363014458736,2002:0.00143460695046956,2003:0.00172063412342992,2004:0.00189312931112383,2005:0.00189533820517001,2006:0.00191302230026201,2007:0.00208705399668382,2008:0.00223269520617281,2009:0.00211809388648855,2010:0.00201905598457954,2011:0.00211963178636891,2012:0.00195992756122178,2013:0.00202470702396059,2014:0.00202627506268269,2015:0.00170060764963853,2016:0.00170924412999474,2017:0.00172975075785139,2018:0.00174989577423288,2019:0.00176950856598175,2020:0.0017964767738924,2021:0.00182925940926401,2022:0.0018294729686089}
#Hopefully just the one on 2015-06-04 by Openmindedly?
,"XBT":{2015:230.54}
,"XDR":{1980:0,1981:0.849669143,1982:0.90850397,1983:0.936560464,1984:0.977321369,1985:0.986526268,1986:0.85214274,1987:0.773748051,1988:0.745580463,1989:0.780900617,1990:0.737135139,1991:0.732009702,1992:0.710154778,1993:0.716315481,1994:0.698574243,1995:0.65983875,1996:0.68877679,1997:0.726835133,1998:0.736969368,1999:0.731386642,2000:0.758990484,2001:0.783971837,2002:0.773218029,2003:0.713999837,2004:0.675328633,2005:0.677590113,2006:0.679903131,2007:0.653823024,2008:0.635019892,2009:0.649513669,2010:0.655705877,2011:0.633741293,2012:0.653151814,2013:0.658074197,2014:0.658697093,2015:0.714973903,2016:0.719540519,2017:0.722092665,2018:0,2019:0,2020:0,2021:0,2022:0}
,"XOF":{1980:0.00444533556347596,1981:0.00348084163086591,1982:0.00297353083061155,1983:0.00239778798657815,1984:0.00228786251342642,1985:0.00222625660262422,1986:0.00288784419073203,1987:0.00332794046595176,1988:0.00335796097147676,1989:0.00313492554551829,1990:0.00367295691771452,1991:0.00354575758224659,1992:0.00377849855993109,1993:0.00353067213191113,1994:0.00180105245480745,1995:0.00200283296059156,1996:0.00195473719506389,1997:0.00171307115590005,1998:0.00169499014765401,1999:0.00162429804963468,2000:0.00140881259567024,2001:0.00136516339203909,2002:0.00143957540744916,2003:0.00172394043528064,2004:0.00189525244913338,2005:0.00189912384560739,2006:0.00191430802990293,2007:0.00208934876079281,2008:0.00224358171571697,2009:0.00212341847696348,2010:0.0020228852838934,2011:0.00212112171837709,2012:0.00195978088510884,2013:0.00202480160923097,2014:0.00202583602458589,2015:0.00169154533219136,2016:0.00168709792013105,2017:0.00171953207530344,2018:0.00179346682069488,2019:0.00180162794964358,2020:0.00180158692732176,2021:0.00180163620393335,2022:0.00180153324971858}
,"YER":{1990:0.0854566836534692,1991:0.0832614175731838,1992:0.0832622443113328,1993:0.0832647026151177,1994:0.083262509137807,1995:0.0246906910151818,1996:0.00875864774892236,1997:0.00773361441858782,1998:0.00735882966439453,1999:0.00642009922200735,2000:0.00621097685402055,2001:0.00592803927077837,2002:0.0056938019932833,2003:0.00545124335372266,2004:0.00540981240418336,2005:0.0052148963020426,2006:0.00506989557020434,2007:0.00502502416077849,2008:0.00500592932247609,2009:0.00492977764211462,2010:0.00455397842846119,2011:0.0046772088471079,2012:0.00466628441122776,2013:0.00465351653400239,2014:0.00465358866405652,2015:0.00465355357900867,2016:0.00357148039941278,2017:0.00285718832769623,2018:0.00197854765370181,2019:0.00154173411618903,2020:0.00131465321111249,2021:0.00117038006319249,2022:0.00106400674018613}
,"ZAR":{1980:1.2839790802748,1981:1.13959783449343,1982:0.920882656895904,1983:0.89759728924941,1984:0.677583607936619,1985:0.448847541294855,1986:0.437892526362865,1987:0.491141683163376,1988:0.439997042254172,1989:0.381340335584424,1990:0.386435473674704,1991:0.362209417842241,1992:0.35066180552117,1993:0.306105941433272,1994:0.281730558024154,1995:0.275703619628638,1996:0.232742577736598,1997:0.217049225093406,1998:0.180771422344412,1999:0.163581322858378,2000:0.144192686648547,2001:0.116238299889881,2002:0.0950885797258608,2003:0.132190748593643,2004:0.155036864521276,2005:0.157185524634986,2006:0.147772099597695,2007:0.141755257876029,2008:0.121185042356408,2009:0.118524435164497,2010:0.13657311041307,2011:0.137872359283901,2012:0.121803979346319,2013:0.103622531280104,2014:0.0922126777593472,2015:0.0784165181187325,2016:0.0679671932107481,2017:0.0746267620786107,2018:0.0735293967944762,2019:0.0710324651513783,2020:0.0685173985125604,2021:0.0658801056678574,2022:0.0633263326755463}
,"ZMW":{1980:1415.33333333333,1981:1096.25,1982:1058,1983:730.6,1984:600.6,1985:356,1986:140.142857142857,1987:110.5,1988:120.441176470588,1989:72.75,1990:32.9435483870968,1991:15.4393305439331,1992:5.81028938906752,1993:2.19209388511427,1994:1.49387254901961,1995:1.15471124620061,1996:0.828308400460299,1997:0.760650521477815,1998:0.537037037037037,1999:0.418870709804404,2000:0.321489152754218,2001:0.276902265809942,2002:0.22735404130753,2003:0.211274890095681,2004:0.209249915909855,2005:0.224044744413671,2006:0.277543294752415,2007:0.249844480386755,2008:0.266973721474459,2009:0.198169312716554,2010:0.208453341013825,2011:0.205729920286233,2012:0.1942806648689,2013:0.185328848682689,2014:0.16253023010799,2015:0.115840790485383,2016:0.0969071974763174,2017:0.105128162970027,2018:0.0994305881496844,2019:0.0910136800889447,2020:0.0844552648292356,2021:0.0792972881123812,2022:0.075040169951526}
}
ratedf["GPB"] = ratedf["GBP"]
ratedf["gbp"] = ratedf["GBP"]
ratedf["EURO"] = ratedf["EUR"]
ratedf["Euro"] = ratedf["EUR"]
ratedf["Eur"] = ratedf["EUR"]
ratedf["CDN"] = ratedf["CAD"]
ratedf["usd"] = ratedf["USD"]
ratedf["GHS"] = ratedf["GHC"]
ratedf["ZMK"] = ratedf["ZMW"]
        
#Used for ambiguously structed arrays resulting from XML queries. If an array has any entries, take the first one.
def default_first(array):
    #If an array isn't empty, give us the first element
    return array[0] if array is not None and len(array)>0 else None

#Used for ambiguous result default replacement. If value doesn't exist, replace it with the default.
def replace_default_if_none(value,default):
    if value is None:
        return default
    elif str.strip(value) == "":
        return default
    else:
        return value
    
#Used for ambiguous recoding. If code exists, try and use the dictionary to look up the result.
def recode_if_not_none(code,dictionary):
    if code is None:
        return None
    elif str.strip(code) == "":
        return None
    else:
        try:
            return dictionary[code]
        except KeyError:
            return None

#Used for currency conversion. Works like recode_if_not_none but for our 2-dimension exchange rate dictionary
def convert_usd(value,year,currency,ratedf):
    if value==0:
        return 0
    elif value is None or year is None or currency is None:
        return None
    try:
        conversion_factor = ratedf[currency][year]
        if conversion_factor>0:
            return value*conversion_factor
        else:
            return None
    except KeyError:
        return None

#A class that will hold the flattening function and dictionary definitions
class IatiFlat(object):
    def __init__(self):
        self.header = ["year","recipient_code","transaction_type","usd_disbursement","original_value","currency_code","budget_or_transaction","budget_type","iati_identifier"]
        self.dictionaries = {}
        #Defaults, can be overwritten with next function
        self.dictionaries["ratedf"] = ratedf
    def define_dict(self,name,dictionary):
        self.dictionaries[name] = dictionary
    #Main flattening function here. Input is the XML root of the XML document, and output is an array of arrays with flattened data.
    def flatten_activities(self,root,publisher):
        for dictionary_name in ["ratedf"]:
            assert dictionary_name in self.dictionaries, "Missing dictionary: {}".format(dictionary_name)
        output = []
        try:
            version = root.attrib["version"]
        except KeyError:
            #Defaults to 2.02 if  the document happens to be missing an IATI version
            version = '2.02'
        
        #Find all activities
        activity_len = len(root.findall("iati-activity"))
            
        #Set up a quick progress bar for tracking processing; iterate through every activity
        bar = progressbar.ProgressBar()
        for i in bar(range(0,activity_len)):
            activity = root.xpath('iati-activity[%s]' % (i + 1) )[0]
            #Capture iati identifier
            iati_identifier = default_first(activity.xpath("iati-identifier/text()"))
            
                
            child_tags = [child.tag for child in activity.getchildren()]
    
            secondary_reporter = default_first(activity.xpath("reporting-org/@secondary-reporter"))
            secondary_reporter = replace_default_if_none(secondary_reporter,"0")
            
            defaults = {}
            default_tags = ["default-currency"]
            for tag in default_tags:
                if tag in activity.attrib.keys():
                    defaults[tag] = activity.attrib[tag]
                elif tag in child_tags:
                    defaults[tag] = default_first(activity.xpath("{}/@code".format(tag)))
                else:
                    defaults[tag] = None
            troublesome_publishers = ["fco","wwf-uk"]
            if publisher=="fco":
                defaults["default-currency"]="GBP"
            
            #For every sector and every recipient in the activity, try and total the percentage splits
            activity_recipient_percentage = 0.0
            
            recipient_countries = activity.findall("recipient-country")
            activity_recipients = {}
            for recipient_country in recipient_countries:
                attribs = recipient_country.attrib
                attrib_keys = attribs.keys()
                percentage = attribs['percentage'] if 'percentage' in attrib_keys else None
                if percentage is not None:
                    percentage = percentage.replace("%","")
                activity_recipient_percentage += float(percentage) if percentage is not None else 0.0
                code = attribs['code'] if 'code' in attrib_keys else None
                if code is not None:
                    activity_recipients[code] = float(percentage) if percentage is not None else None
                
            recipient_regions = activity.findall("recipient-region")
            for recipient_region in recipient_regions:
                attribs = recipient_region.attrib
                attrib_keys = attribs.keys()
                percentage = attribs['percentage'] if 'percentage' in attrib_keys else None
                if percentage is not None:
                    percentage = percentage.replace("%","")
                activity_recipient_percentage += float(percentage) if percentage is not None else 0.0
                code = attribs['code'] if 'code' in attrib_keys else None
                if code is not None:
                    activity_recipients[code] = float(percentage) if percentage is not None else None
                    
            #If percentages are greater than 100, rescale to 100. Also divide by 100 to make sure percentages run 0 to 1.00
            activity_recipient_percentage = max(activity_recipient_percentage,100.0)
            
            for activity_recipient_code in activity_recipients:
                activity_recipients[activity_recipient_code] = (activity_recipients[activity_recipient_code] / activity_recipient_percentage) if (activity_recipients[activity_recipient_code]) is not None else None
                
            #If there's only one recipient, it's percent is implied to be 100
            if len(activity_recipients.keys())==1:
                activity_recipients[activity_recipients.keys()[0]] = 1
            
            if secondary_reporter=="0":
                has_transactions = "transaction" in child_tags
                if has_transactions:
                    transactions = activity.findall("transaction")
                    
                    #Once through the transactions to find the recipient sum, recipient percents
                    transaction_recipients = {}
                    for transaction in transactions:
                        transaction_type_code = default_first(transaction.xpath("transaction-type/@code"))
                        if transaction_type_code in ["E","D","3","4"]:
                            
                            recipient_country_code = default_first(transaction.xpath("recipient-country/@code"))
                            recipient_region_code = default_first(transaction.xpath("recipient-region/@code"))
                            
                            recipient_code = replace_default_if_none(recipient_country_code,recipient_region_code)
                            
                            value = default_first(transaction.xpath("value/text()"))
                            try:
                                value = float(value.replace(" ", "")) if value is not None else None
                            except ValueError:
                                value = None
                            
                            if value is not None:
                                if recipient_code is not None:
                                    transaction_recipients[recipient_code] = value
                            
                    #If we turned up valid recipients, don't use the activity-level ones
                    use_activity_recipients = len(transaction_recipients.keys())==0
                    
                    #Calc the sum of non-negative recips
                    transaction_recipient_value_sum = 0.0
                    for recipient_code in transaction_recipients:
                        transaction_recipient_value_sum += transaction_recipients[recipient_code] if (transaction_recipients[recipient_code]>0.0) else 0.0
                    if transaction_recipient_value_sum > 0.0:
                        for recipient_code in transaction_recipients:
                            transaction_recipients[recipient_code] = transaction_recipients[recipient_code]/transaction_recipient_value_sum
                                
                    #If there's only one recipient, it's percent is implied to be 100
                    if len(transaction_recipients.keys())==1:
                        transaction_recipients[transaction_recipients.keys()[0]] = 1
                            
                    for transaction in transactions:
                        transaction_type_code = default_first(transaction.xpath("transaction-type/@code"))
                        if transaction_type_code in ["E","D","3","4"]:
                            transaction_date = default_first(transaction.xpath("transaction-date/@iso-date"))
                            try:
                                year = int(transaction_date[:4]) if transaction_date is not None else None
                            except ValueError:
                                year = None
                            
                            currency = default_first(transaction.xpath("value/@currency"))
                            currency = replace_default_if_none(currency,defaults["default-currency"])
                            if currency is not None:
                                currency = currency.replace(" ","")
                            if publisher in troublesome_publishers:
                                currency = defaults["default-currency"]
                
                            value = default_first(transaction.xpath("value/text()"))
                            try:
                                value = float(value.replace(" ", "")) if value is not None else None
                            except ValueError:
                                value = None
                                
                            recipient_country_code = default_first(transaction.xpath("recipient-country/@code"))
                            recipient_region_code = default_first(transaction.xpath("recipient-region/@code"))
                            
                            recipient_code = replace_default_if_none(recipient_country_code,recipient_region_code)
                                
                            budget_type = None
                            b_or_t = "Transaction"
                            
                            if value and use_activity_recipients:
                                for activity_recipient_code in activity_recipients.keys():
                                    activity_recipient_percentage = activity_recipients[activity_recipient_code]
                                    calculated_value =  value*activity_recipient_percentage if (activity_recipient_percentage is not None) else None
                                    if currency in self.dictionaries["ratedf"]:
                                        converted_value = convert_usd(calculated_value,year,currency,self.dictionaries["ratedf"])
                                    else:
                                        pdb.set_trace()
                                    # ["year","recipient_code","transaction_type","usd_disbursement","budget_or_transaction","budget_type","iati_identifier"]
                                    row = [year,activity_recipient_code,transaction_type_code,converted_value,value,currency,b_or_t,budget_type,iati_identifier]
                                    output.append(row)
                            elif value and not use_activity_recipients:
                                if currency in self.dictionaries["ratedf"]:
                                    converted_value = convert_usd(value,year,currency,self.dictionaries["ratedf"])
                                else:
                                    pdb.set_trace()
                                # ["year","recipient_code","transaction_type","usd_disbursement","budget_or_transaction","budget_type","iati_identifier"]
                                row = [year,recipient_code,transaction_type_code,converted_value,value,currency,b_or_t,budget_type,iati_identifier]
                                output.append(row)
                                    
                    #Loop through budgets, and capture as close equivalents as we can to transactions
                    has_budget = "budget" in child_tags
                    if has_budget:
                        budgets = activity.findall("budget")
                        for budget in budgets:
                            transaction_type_code = None
                            if "type" in budget.attrib.keys():
                                budget_type = budget.attrib["type"]
                            else:
                                budget_type = None
                                
                            transaction_date = default_first(budget.xpath("period-start/@iso-date"))
                            try:
                                year = int(transaction_date[:4]) if transaction_date is not None else None
                            except ValueError:
                                year = None
                                
                            value = default_first(budget.xpath("value/text()"))
                            try:
                                value = float(value.replace(" ", "")) if value is not None else None
                            except ValueError:
                                value = None
                            currency = default_first(budget.xpath("value/@currency"))
                            currency = replace_default_if_none(currency,defaults["default-currency"])
                            if currency is not None:
                                currency = currency.replace(" ","")
                            if publisher in troublesome_publishers:
                                currency = defaults["default-currency"]
                            
                            b_or_t = "Budget"
                    
                            if value and use_activity_recipients:
                                for activity_recipient_code in activity_recipients.keys():
                                    activity_recipient_percentage = activity_recipients[activity_recipient_code]
                                    calculated_value =  value*activity_recipient_percentage if (activity_recipient_percentage is not None) else None
                                    if currency in self.dictionaries["ratedf"]:
                                        converted_value = convert_usd(calculated_value,year,currency,self.dictionaries["ratedf"])
                                    else:
                                        pdb.set_trace()
                                    # ["year","recipient_code","transaction_type","usd_disbursement","budget_or_transaction","budget_type","iati_identifier"]
                                    row = [year,activity_recipient_code,transaction_type_code,converted_value,value,currency,b_or_t,budget_type,iati_identifier]
                                    output.append(row)
                            elif value and not use_activity_recipients:
                                for transaction_recipient_code in transaction_recipients.keys():
                                    transaction_recipient_percentage = transaction_recipients[transaction_recipient_code]
                                    calculated_value =  value*transaction_recipient_percentage if (transaction_recipient_percentage is not None) else None
                                    if currency in self.dictionaries["ratedf"]:
                                        converted_value = convert_usd(calculated_value,year,currency,self.dictionaries["ratedf"])
                                    else:
                                        pdb.set_trace()
                                    # ["year","recipient_code","transaction_type","usd_disbursement","budget_or_transaction","budget_type","iati_identifier"]
                                    row = [year,transaction_recipient_code,transaction_type_code,converted_value,value,currency,b_or_t,budget_type,iati_identifier]
                                    output.append(row)

        return output